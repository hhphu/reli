# Test Case for Bid Optimization Feature

| **Test Case ID** | **Description** | **Inputs** | **Expected Outputs** | **Notes** |
| ---------------- | --------------- | ---------- | -------------------- | --------- |
| TC001             | Validate aggregation of performance metrics by keyword group   | Data with multiple targets having the same `Group ID`, `Keyword Text`, `Match Type`, and `Campaign Type`.                                                                | Aggregated performance metrics (e.g., clicks, impressions, CTR) calculated correctly for each keyword group.                                                         | Ensure data includes targets with overlapping and unique group IDs.                                     |
| TC002             | Validate bid calculation using the "average bid" method        | Keyword group with multiple targets and their associated bids.                                                                                                          | Effective bid calculated as the average of all target bids within the group.                                                                                         | Test with varied bid amounts (e.g., $1.50, $2.00, $3.00).                                              |
| TC003             | Validate bid calculation using the "highest-performing target" | Keyword group with performance metrics for each target (e.g., clicks, conversions).                                                                                     | Effective bid set to the bid of the highest-performing target within the group.                                                                                       | Define "highest-performing" based on clear metrics (e.g., highest CTR or conversion rate).              |
| TC004             | Validate bid calculation for paused targets                    | Group with both active and paused targets, where paused targets include performance data.                                                                               | Paused targets are included in the bid calculation if within the specified time window; otherwise, excluded.                                                          | Assume paused targets with no recent performance are excluded.                                          |
| TC005             | Validate time-based rule application for Weekday_day version   | Performance data for Monday-Friday between 4 AM and 7 PM.                                                                                                               | Bid optimizations applied only during the specified time window (Weekday_day).                                                                                       | Ensure performance data outside this window is ignored.                                                |
| TC006             | Validate time-based rule application for Weekend_night version | Performance data for Saturday-Sunday between 7 PM and 4 AM.                                                                                                             | Bid optimizations applied only during the specified time window (Weekend_night).                                                                                      | Include data spanning transitions between time windows.                                                |
| TC007             | Validate exclusion of groups with insufficient data            | Keyword groups with fewer than 5 clicks in their aggregated performance metrics.                                                                                        | No bid optimizations are applied to groups with fewer than 5 clicks.                                                                                                  | Include groups with exactly 4 and 5 clicks for boundary testing.                                       |
| TC008             | Validate handling of missing performance metrics               | Keyword group with missing values for required metrics (e.g., clicks, impressions).                                                                                     | Bid optimizations skipped for groups with missing performance data.                                                                                                   | Ensure clear error messages or logs are generated for missing data.                                    |
| TC009             | Validate handling of invalid bid values                        | Targets with bid values that are negative, zero, or non-numeric.                                                                                                        | Invalid bid values are flagged, and optimizations skip such targets while aggregating the rest.                                                                       | Include error handling mechanisms in the test.                                                          |
| TC010             | Validate database updates for bid changes                      | Simulated bid updates for multiple keyword groups.                                                                                                                      | Bid changes are saved correctly in the database, and the `keyword_multivers` table is updated accurately.                                                             | Verify logs or database change history for accuracy.                                                   |
| TC011             | Validate outlier handling in bid calculations                  | Keyword group with an outlier bid significantly higher or lower than the rest.                                                                                          | Outliers are excluded or appropriately weighted in bid calculations, based on the defined rules.                                                                      | Test with a range of thresholds for defining outliers.                                                  |
| TC012             | Validate performance under high data volume                    | Large dataset with thousands of keyword groups and hourly performance metrics.                                                                                          | Bid optimizations process successfully within acceptable time limits without performance degradation.                                                                 | Conduct stress tests and measure system performance.                                                   |
| TC013             | Validate performance during transitions between time windows   | Performance data spanning the end of one time window (e.g., Weekday_day) and the start of another (e.g., Weekday_night).                                                 | Bid optimizations applied only to the appropriate time window, with no overlap or errors.                                                                             | Ensure time transitions are handled seamlessly.                                                        |
| TC014             | Validate logging and error handling                            | Scenarios with invalid data (e.g., missing metrics, negative bid values, unrecognized time window).                                                                     | Errors are logged clearly with sufficient details for debugging, and processing continues for valid groups.                                                           | Verify logs for completeness and clarity.                                                              |
| TC015             | Validate rollback in case of failed updates                    | Simulated failure during database updates (e.g., network timeout, invalid queries).                                                                                     | System rolls back changes to maintain database consistency, with no partial updates applied.                                                                          | Ensure transactional integrity in database operations.                                                  |

